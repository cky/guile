2000-11-24  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* readline.c (scm_readline, scm_add_history, completion_function,
	scm_filename_completion_function):  Replace calls to
	SCM_COERCE_SUBSTR with SCM_STRING_COERCE_0TERMINATION_X.

	(internal_readline, scm_add_history, scm_read_history,
	scm_write_history, scm_filename_completion_function,
	completion_function):  Replace SCM_CHARS with SCM_STRING_CHARS.

2000-11-19  Gary Houston  <ghouston@arglist.com>

	* configure.in: test $ac_cv_lib_readline_readline instead of
	$ac_cv_lib_readline_main.  Thanks to Lars J. Aas.

2000-09-17  Marius Vollmer  <mvo@zagadka.ping.de>

	* configure.in: Check for curses, terminfo and termlib libraries
	in addition to ncurses and termcap.
	Check for `readline' in libreadline, not for `main'.
	Thanks to Albert Chin!
	
2000-07-17  Marius Vollmer  <mvo@zagadka.ping.de>

	* configure.in (rl_pre_input_hook): Don't check for this with
	AC_CHECK_FUNCS, it doesn't work on HP/UX.  Test for it with
	AC_TRY_LINK.

2000-06-19  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.c (sigwinch_enable_restart, scm_init_readline):
	Re-enable restart for SIGWINCH signal.

	* configure.in: Added test if readline clears SA_RESTART flag for
	SIGWINCH.  (Thanks to Dale P. Smith.)
	Check for siginterrupt and rl_pre_input_hook.

2000-06-14  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.c (scm_readline): Added parenthesis around && within
	||.
	Fixed up prototype for `reentry_barrier'.
	Conditionally #include <unistd.h>.  (Needed for `dup'.)

2000-06-13  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* Makefile.am (dist-hook): Added kludge to fix automake generated
	dependencies in the distribution archive Makefile.

2000-06-12  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.scm (apropos-completion-function): Don't define and
	install if the 'regex feature is missing.

2000-06-06  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* readline.c: Always provide scm_init_readline, also if readline
	support is not included.  Otherwise, a strange dynamic loading
	error will occur.  (It would be better not to install
	libguilereadline at all.)

	* readline-activator.scm (activate-readline): Report an error if
	readline isn't provided by Guile.

	* readline.scm: Report an error if readline isn't provided by
	Guile;  Added :no-backtrace to module header.

	* configure.in: Put more ink before readline version warning.
	(Thanks to Ian Grant.)

2000-06-01  Michael Livshin  <mlivshin@bigfoot.com>

	* autogen.sh: call ../guile-aclocal.sh instead of aclocal
	
2000-05-01  Gary Houston  <ghouston@arglist.com>

	* readline.c: include libguile.h, not libguile/libguile.h.

2000-04-21  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* *.*: Change includes so that they always use the "prefixes"
	libguile/, qt/, guile-readline/, or libltdl/.

	* Makefile.am (DEFS): Added.  automake adds -I options to DEFS,
	and we don't want that.
	(INCLUDES): Removed all -I options except for the root source
	directory and the root build directory.
	
2000-04-04  Dirk Herrmann  <D.Herrmann@tu-bs.de>

	* readline.c (scm_readline):  Must unpack SCM values to access
	their raw contents.

2000-03-19  Michael Livshin  <mlivshin@bigfoot.com>

	* *.[hc]: add Emacs magic at the end of file, to ensure GNU
 	indentation style.

2000-03-12  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.c (current_input_getc): Don't pass int values through
	SCM variables.
	(match_paren): Bugfix: First arg to select is not number of
	descriptors but the number of the highest descriptor + 1.

Thu Mar  9 08:00:26 2000  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c: scm_validate.h renamed to validate.h.

Wed Mar  8 10:43:10 2000  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c (match_paren): Use SELECT_TYPE, not fd_set, for type
 	of readset.

2000-01-25  Marius Vollmer  <mvo@zagadka.ping.de>

	* autogen.sh: Call libtoolize.  Pass --add-missing option to
	automake.

	* readline.scm: Only link glue code when the 'readline feature is
	not already present.  Thanks to Clark McGrew.

Tue Jan 11 17:51:40 2000  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c (scm_init_readline): Drop extra argument to
 	scm_mutex_init as that argument should not exist.  I do not know
	how this escaped detection for so long.
	
2000-01-09  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.c (match_paren): Changed return type to int (this is
	the definition in readline 4) and modified code layout according
	to GNU coding standards.

Wed Jan  5 11:18:01 2000  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c: Whitespace changes -- added space after
	SCM_VALIDATE_* macros to match GNU coding standards.

Wed Jan  5 11:02:40 2000  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c: Rename GUILE_PROC to SCM_DEFINE.

Mon Dec 13 13:57:57 1999  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c: Include libguile/scm_validate.h

Sun Dec 12 19:56:52 1999  Greg J. Badros  <gjb@cs.washington.edu>

	* readline.c: Updated to use GUILE_PROC, SCM_VALIDATE, and have
	(now empty) docstrings.

1999-11-18  Gary Houston  <ghouston@freewire.co.uk>

	* readline.c (scm_init_readline): set rl_readline_name to Guile,
	to allow conditionals in  .inputrc.

1999-10-05  Jim Blandy  <jimb@savonarola.red-bean.com>

	* Makefile.in, configure, aclocal.m4: Deleted from CVS repository.
	Run the autogen.sh script to create generated files like these.
	* autogen.sh: New script, invoked by the top-level autogen.sh.

1999-09-22  Jim Blandy  <jimb@savonarola.red-bean.com>

	* configure.in: Call AM_PROG_CC_STDC.
	* configure, aclocal.m4: Regenerated.

1999-09-16  Mikael Djurfeldt  <mdj@mdj-pc.nada.kth.se>

	* Makefile.am (.c.x): Use same rule as in libguile.

1999-09-12  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.h, readline.scm: Updated copyright notices.

1999-09-11  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.scm (activate-readline): Set (using-readline?).

1999-09-11  Jim Blandy  <jimb@savonarola.red-bean.com>

	* aclocal.m4: Regenerated with newer libtool macros.

	* Makefile.am (DISTCLEANFILES): Get rid of .x files.
	* Makefile.in: Regenerated.
	(Thanks to Keisuke Nishida.)

1999-09-11  Marius Vollmer  <mvo@zagadka.ping.de>

	* readline.scm: Moved from ../ice-9.
	Dynamically link libguilereadline.so.
	(readline): Just define in this module, do not overwrite builtin
	variable.  The builtin readline function is now named "%readline",
	so this works.  See below.
	(activate-readline): New function which contains the readline
	activation code formerly found in top-repl.
	
	* readline.c (scm_readline): Export it to Scheme as "%readline".

	* configure.in: Get version from ../GUILE-VERSION and use it for
	package version.

	* Makefile.am: Do not install and distribute
	readline-activator.scm.  Install and distribute readline.scm
	instead.

	* aclocal.m4, Makefile.in, configure, libtool: Regenerated, but
	probably with the wrong version of the tools.

1999-08-29  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	The following change makes it possible for applications to have
	their own version of scm_readline.
	* readline.c, readline.h (rl_cleanup_after_signal,
	rl_free_line_state): Made global.
	(scm_readline_init_ports): New function.
	(scm_readline): Use scm_readline_init_ports.
	(Thanks to Anders Holst.)

	* Makefile.am: Install guile-readline/readline.h.
	
1999-08-20  James Blandy  <jimb@mule.m17n.org>

	* Makefile.in, aclocal.m4, configure: Regenerated.

1999-08-17  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* configure.in (HAVE_RL_GETC_FUNCTION): Modified test to actually
	use rl_getc_function.  Otherwise smart compilers, like gcc,
	optimize away the reference so that no error occurs in the link
	phase.

1999-08-04  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* Makefile.am (INCLUDES): Added -I$(srcdir)/../libguile.
	(Thanks to Greg Badros.)

1999-07-24  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>

	* readline.c (handle_error): Put a cosmetic newline on
	rl_outstream on error before closing it.

	* configure.in: Changed AC_MSG_ERROR into AC_MSG_WARN in case
	readline doesn't exist on the system, so that configuration can
	proceed normally without readline.

	* readline.c: #include "libguile/_scm.h" (so that we get the
	configuration information) and fix other includes so that they'll
	work on a system where guile is not yet installed.

	* Makefile.am (BUILT_SOURCES): Added.

1999-07-23  Marius Vollmer  <mvo@zagadka.ping.de>

	* Checked everything into CVS.

1999-07-22  Marius Vollmer  <mvo@zagadka.ping.de>

	* readline.c (stream_from_fport): New function.
	(scm_readline): Use it to for the input and output ports.  Close
	the streams after readline returns.
	(handle_error): Close them also when an error occured.

1999-06-17  Marius Vollmer  <mvo@zagadka.ping.de>

	* readline.h, readline.c: Removed exception notice from copyright
	statement.

1999-05-16  Marius Vollmer  <mvo@zagadka.ping.de>

	* Started guile-readline package.  Files are copied from old
	guile-core package and slightly modified.
